<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>缓冲运动</title>
	<style type="text/css">
		*{padding: 0;margin: 0;}
		div{
			width: 200px;height: 200px;background-color: red;
			position:absolute;left: -200px;
		}
		span{
			display: block;width: 30px;height: 45px;
			background-color: green;text-align: center;
			position: absolute;right: -30px;top:77.5px;
		}
	</style>
</head>
<body>
	<div id="div">
		<span>分享</span>
	</div>
	<script type="text/javascript">
		var div=document.getElementById('div');
		div.onmouseover=function(){
			move(this,"width",0,500);
		};
		div.onmouseout=function(){
			move(this,-200);
		};
		var timer=null;
		function move(obj, attr, oTar, interv, fn) {
		// clearInterval(obj.timer);
		var step = parseInt(interv / 16);
		obj.timer = setInterval(function() {
			var flag = true;
			//获取当前值
			var current = parseInt(getStyle(obj, attr));
			var speed = (oTar - current) / step;
			speed = speed > 0 ? Math.ceil(speed) : Math.floor(speed);
			if (current !== oTar) {
				flag=false;
			} else {
				obj.style[attr] = current + speed + 'px';
			}
			if(flag){
				clearInterval(obj.timer);
				if(fn){
					fn();
				}
			}
		}, 16);
		
	}
	function getStyle(obj,attr){
		if(obj.currentStyle){
			return obj.currentStyle[attr];
		}else{
			return window.getComputedStyle(obj,null)[attr];
		}
}
	</script>
</body>
</html>